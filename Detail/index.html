<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="/Detail/style.css">
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script defer src="/Detail/script.js"></script>
     <!-- 헤더푸터 고정 스크립트  -->
<script>
        $(document).ready(function() {
    $("#header_box").load("../Includes/header.html");
    $("#footer_box").load("../Includes/footer.html");
    });
</script>
</head>
<body>
    <!-- header-->
     <header id="header_box"></header>
    <!--description   -->
<div id="des_container">
  <div class="des_title">
    <h2>위키드</h2>
    <ul>
        <li ><img src="/Detail/img/icon/tag_cmmg_19.svg" alt=""></li>
        <li>2024</li>
        <li>movie</li> </li>
        <li>50분</li>
    </ul>
 </div>
  <div class="watch_select">
    <button id="purchaseBtn">play</button> 
    <!-- 비디오 팝업 -->
<div class="overlay" id="overlay"></div>
<div class="popup" id="popup">
    <span id="closeBtn" class="close-btn">&times;</span>
    <iframe width="720" height="576" id="videoFrame" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
  
</div>
<!-- 비디오 팝업 end -->
<span id="favoriteBtn" onclick="toggleFavorite()">
    <img src="/Detail/img/icon/favorite_24dp_5F6368_FILL0_wght400_GRAD0_opsz24.svg">
    <p>&nbsp&nbsp찜 </p> 
</span> 
<span id="shareBtn"><img src="/Detail/img/icon/ios_share_24dp_5F6368_FILL0_wght400_GRAD0_opsz24.svg"> 
    <p>&nbsp공유</p>
</span> 
</div>
<!-- share popup -->
<div id="sharePopup" class="share-popup" style="display: none;">
    <span class="share-option" onclick="shareOnFacebook()">
        <img src="/Detail/img/icon/circle-facebook.svg" alt="Facebook">
    </span>
    <span class="share-option" onclick="shareOnKakaoTalk()">
        <img src="/Detail/img/icon/circle-kakao.svg"alt="KakaoTalk">
    </span>
    <span class="share-option" onclick="copyLink()">
        <img src="/Detail/img/icon/circle-url (1).svg" alt="Copy">
    </span>
</div>
  </div>
</div>
<!--  시놉시스  -->
<div class="tb_container">
  <div id="tb_container">
    <button id="toggleButton"><span>더보기</span><img src="/Detail/img/icon/down arrow.svg"></button>
    <div id="dropdown" class="dropdown-content" >
        <p id="synopsisText">자신의 진정한 힘을 미처 발견하지 못한 '엘파바'(신시아 에리보).
            자신의 진정한 본성을 아직 발견하지 못한 ‘글린다'(아리아나 그란데).
            
            전혀 다른 두 사람은 마법 같은 우정을 쌓아간다.
            그러던 어느 날, '마법사'
            <br>
            의 초대를 받아 에메랄드 시티로 가게 되고
            운명은 예상치 못한 위기와 모험으로 두 사람을 이끄는데…
            
            마법 같은 운명의 시작, 누구나 세상을 날아오를 수 있어…!<br>Lorem, ipsum dolor sit amet consectetur
        </p>
        <button id="closeButton" style="display: none;"><span>닫기</span><img src="/Detail/img/icon/up arrow.svg" alt=""></button>
    </div>
  </div>
<div class="des_poster"><img src="/Detail/img/des_poster/wkd.jpg"alt="Poster Image"></div>
</div>
<!-- footer -->
 <footer id="footer_box"></footer>
<!--js시놉시스 -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const dropdown = document.getElementById('dropdown');
        const toggleButton = document.getElementById('toggleButton');
        const closeButton = document.getElementById('closeButton');
        const synopsisText = document.getElementById('synopsisText');

        // 더보기 버튼 클릭 시 높이 조절 및 버튼 전환
        toggleButton.addEventListener('click', function() {
            synopsisText.style.webkitLineClamp = 'none'; // 전체 텍스트 보이기
            toggleButton.style.display = 'none'; // 더보기 버튼 숨기기
            closeButton.style.display = 'inline-block'; // 닫기 버튼 표시
        });

        // 닫기 버튼 클릭 시 다시 6줄만 보이도록 조정 및 버튼 전환
        closeButton.addEventListener('click', function() {
            synopsisText.style.webkitLineClamp = '6'; // 다시 6줄로 제한
            toggleButton.style.display = 'inline-block'; // 더보기 버튼 보이기
            closeButton.style.display = 'none'; // 닫기 버튼 숨기기
        });
    });
</script>

<!-- share popup script-->
<script>

document.getElementById("shareBtn").onclick = () => {
        const popup = document.getElementById("sharePopup");
        popup.style.display = popup.style.display === "none" ? "block" : "none";
    };

function shareOnFacebook() {
    const url = 'https://www.facebook.com'; // 공유할 URL
    window.open(`https://www.facebook.com/login/?privacy_mutation_token=eyJ0eXBlIjowLCJjcmVhdGlvbl90aW1lIjoxNzI5MDEwODU5LCJjYWxsc2l0ZV9pZCI6MzgxMjI5MDc5NTc1OTQ2fQ%3D%3D&next=${encodeURIComponent(url)}`, '_blank');
}

function shareOnKakaoTalk() {
    const url = 'https://accounts.kakao.com/login/'; // 공유할 URL
    window.open(`https://accounts.kakao.com/login/?continue=https%3A%2F%2Fcs.kakao.com%2Fhelps%3Fservice%3D8#login'=${encodeURIComponent(url)}`, '_blank');
function copyLink() {
    const url = 'http://127.0.0.1:5500/Detail/index.html'; // 복사할 URL
    navigator.clipboard.writeText(url).then(() => {
        alert('링크가 복사되었습니다!');
    });
}
function toggleFavorite() {
            const favoriteBtn = document.getElementById("favoriteBtn");
            favoriteBtn.classList.toggle("favorite-selected");
            const favoriteIcon = document.getElementById("favoriteIcon");
            favoriteIcon.src = favoriteBtn.classList.contains("favorite-selected") 
                ? '/img/icon/favorite-selected.svg' // 선택된 아이콘 경로
                : '/img/icon/favorite.svg'; // 기본 아이콘 경로
        }
}
       
    </script>
    <!-- 비디오 팝업 -->
    <script>
        // 팝업과 오버레이 요소 가져오기
        const popup = document.getElementById("popup");
        const overlay = document.getElementById("overlay");
        const videoFrame = document.getElementById("videoFrame");
        // 버튼 클릭 시 팝업과 오버레이 표시
        document.getElementById("purchaseBtn").addEventListener("click", function() {
            videoFrame.src = "https://www.youtube.com/embed/w6FbiayT3N4?autoplay=1&mute=1&controls=0";
           popup.style.display = "block";
             overlay.style.display = "block";
        });

    
        // 닫기 버튼 클릭 시 팝업과 오버레이 숨김
        document.getElementById("closeBtn").addEventListener("click", function() {
            popup.style.display = "none";
            overlay.style.display = "none";
            videoFrame.src = ""; // src를 비워 비디오 정지
        });
    
        // 오버레이 클릭 시 팝업과 오버레이 숨김
        overlay.addEventListener("click", function() {
            popup.style.display = "none";
            overlay.style.display = "none"; // 비디오정지 
            videoFrame.src = ""; // src를 비워 비디오 정지
        });
    </script>
   
</body>
</html>